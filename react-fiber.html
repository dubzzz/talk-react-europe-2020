<!DOCTYPE html>
<html>
  <head>
    <title>React Fiber</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="./static/reveal.min.css" />
    <link rel="stylesheet" href="./static/black.css" />
    <link rel="stylesheet" href="./static/monokai.min.css" id="highlight-css" />

    <style>
      .reveal pre code {
        background: none;
      }

      .reveal h1,
      .reveal h2,
      .reveal h3,
      .reveal h4,
      .reveal h5,
      .reveal h6 {
        font-weight: normal;
        text-transform: none;
      }

      .reveal h1 + .more,
      .reveal h2 + .more,
      .reveal h3 + .more,
      .reveal h4 + .more,
      .reveal h5 + .more,
      .reveal h6 + .more {
        margin-top: -20px;
      }

      .reveal .more {
        color: #777872;
      }

      .reveal a,
      h3 {
        color: #00ccff !important;
        text-decoration: none;
      }
      .reveal a:hover,
      h2 {
        color: #008bff !important;
        text-decoration: none;
      }

      .reveal blockquote,
      .reveal p.quote {
        margin: 0;
        text-align: justify;
        font-style: italic;
        margin-right: 1em;
        margin-top: 20px;
        margin-bottom: 20px;
        padding-left: 1em;
        font-size: 0.9em;
        border-left: 1px navajowhite solid;
      }
      .reveal blockquote::before,
      .reveal p.quote::before {
        content: '\201C';
        font-size: 2em;
        float: left;
        color: white;
        margin-left: -1em;
      }

      .reveal p.quote-right {
        margin: 0;
        text-align: right;
        font-style: italic;
        margin-left: 1em;
        margin-top: 20px;
        margin-bottom: 20px;
        padding-right: 1em;
        font-size: 0.9em;
        border-right: 1px navajowhite solid;
      }
      .reveal p.quote-right::after {
        content: '\201C';
        font-size: 2em;
        float: right;
        color: white;
        margin-right: -1em;
      }

      em {
        color: #00ccff;
        font-style: normal;
        font-weight: normal;
      }

      li {
        color: #d3d3d3;
      }

      li.active,
      .left-menu > li:last-child,
      .left-menu > li:last-child > ul > li:last-child {
        color: #f37723;
      }

      .reveal ol {
        counter-reset: step-counter;
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 100%;
        text-align: center;
      }

      .reveal ol li {
        counter-increment: step-counter;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .reveal ol li:before {
        content: counter(step-counter, upper-roman);
        color: #f37723;
        float: left;
      }

      .reveal .vsmallnote {
        font-style: italic;
        font-size: 0.5em;
        color: #777872;
      }

      .flex {
        display: flex;
        flex-flow: row;
      }

      .no-margin {
        margin: none !important;
      }

      .left-column,
      .right-column {
        flex: 50%;
        text-align: left;
      }

      .left-padded {
        padding-left: 1em !important;
      }

      body {
        background: #000000;
        background-color: #000000;
      }

      .custom-collapse.fragment {
        max-height: 0;
        transform: scaleY(0%);
      }
      .custom-collapse.fragment.visible {
        max-height: 100px;
        transform: scaleY(100%);
        transition: max-height 2s ease-in, transform 2s ease-in;
      }

      .reveal .slides section .fragment.highlight-transparent {
        opacity: 1;
        visibility: visible;
      }
      .reveal .slides section .fragment.highlight-transparent.visible {
        opacity: 0.2;
        transition: opacity 0.3s ease-in;
      }

      @font-face {
        font-family: 'Virgil';
        src: url('./static/FG_Virgil.woff2');
        /* src: url('https://excalidraw.com/FG_Virgil.woff2'); */
      }
      g.diag-white path,
      g.diag-user path,
      g.diag-call path,
      g.diag-answer path {
        stroke-width: 4px;
        fill: none;
      }
      g.diag-white text,
      g.diag-user text,
      g.diag-call text,
      g.diag-answer text {
        font-family: 'Virgil';
        font-size: 26px;
      }
      g.diag-white path {
        stroke: #ffffff;
      }
      g.diag-white text {
        fill: #ffffff;
      }
      g.diag-user path {
        stroke: #42affa;
      }
      g.diag-user text {
        fill: #42affa;
      }
      g.diag-call path {
        stroke: #364fc7;
      }
      g.diag-call text {
        fill: #364fc7;
      }
      g.diag-answer path {
        stroke: rgb(17, 183, 33);
      }
      g.diag-answer text {
        fill: rgb(17, 183, 33);
      }
    </style>
  </head>
  <body>
    <!-- style="cursor:none;" -->
    <div class="reveal">
      <div class="slides">
        <section>
          <div>
            <img
              src="./images/react-europe.webp"
              alt="React-Europe"
              style="height: 128px; filter: invert(1); background: none; border: none; box-shadow: none;"
            />
          </div>
          <h1>Detecting the unexpected in Web UI</h1>
          <h2 class="fragment custom-collapse">
            Let's talk about race conditions
          </h2>
          <h3>Nicolas DUBIEN</h3>
          <p class="vsmallnote">
            React-Europe
          </p>
        </section>
        <section>
          <h1>One day, it happenedâ€¦</h1>
        </section>
        <section>
          <video controls width="100%" style="cursor: default;">
            <source src="./images/boom.webm" type="video/webm" />
          </video>
        </section>
        <section>
          <img id="navigation-hell" alt="Navigation hell" src="./images/navigation-hell.gif" onclick="resetGif()" />
          <script>
            function resetGif() {
              document.getElementById('navigation-hell').setAttribute('src', '');
              document.getElementById('navigation-hell').setAttribute('src', './images/navigation-hell.gif');
            }
          </script>
        </section>
        <section>
          <h2>Race condition?</h2>
          <p class="quote">
            <span class="fragment highlight-transparent visible" data-fragment-index="1"
              >A race condition [â€¦] is the condition [â€¦] where the system's substantive behavior is dependent on the </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">sequence</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1"> or timing </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">of</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1"> other </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">uncontrollable events</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1">.</span>
          </p>
          <p class="fragment custom-collapse">
            ðŸ¤” What about user inputs, API callsâ€¦?
          </p>
          <p class="vsmallnote">
            Source:
            <a href="https://en.wikipedia.org/wiki/Race_condition" target="_blank"
              >https://en.wikipedia.org/wiki/Race_condition</a
            >
          </p>
        </section>
        <section>
          <img src="./images/test-pyramid.png" style="border: none; background: none; box-shadow: none;" />
        </section>
        <section>
          <h3>Unit test</h3>
          <img src="./images/unit-test-example.png" />
        </section>
        <section>
          <h3>E2E test</h3>
          <img src="./images/e2e-test-example.png" />
        </section>
        <section>
          <h2>Are we sure to cover everything?</h2>
          <h3 class="fragment">Yes, all my users are happy</h3>
          <h3 class="fragment">Yes, I have 100% coverage</h3>
        </section>
        <section>
          <img src="images/coverage.jpg" />
          <p><em>100% coverage</em></p>
        </section>
        <section>
          <h2>Not enoughâ€¦</h2>
        </section>
        <section>
          <div>
            <img src="./images/me.jpg" style="border-radius: 50%; height: 128px;" />
          </div>
          <div>
            <h2>Nicolas DUBIEN</h2>
            <div style="margin-top: 48px;"></div>
            <div>
              <img
                src="./images/pigment.png"
                style="height: 64px; border: none; background: none; margin: 0px; box-shadow: none; filter: invert(1);"
              />
            </div>
            <div style="margin-top: 48px;"></div>
            <div style="color: #ffffff; vertical-align: middle;">
              <img src="./images/github-white.png" style="height: 32px; border: none; background: none; margin: 0px;" />
              dubzzz
            </div>
            <div style="color: #1da1f2; vertical-align: middle;">
              <img src="./images/twitter.png" style="height: 32px; border: none; background: none; margin: 0px;" />
              ndubien
            </div>
          </div>
        </section>
        <section>
          <h2>Our issue?</h2>
          <h3 class="fragment">Limited scope of inputs covered</h3>
        </section>
        <section data-transition="slide-in fade-out">
          <pre class="javascript"><code data-trim data-noescape>
import { isSubstring } from "./isSubstring";
// isSubstring(text: string, word: string): boolean

test("should check if word is a substring of text", () => {
  expect(isSubstring("", "")).toBe(true);
  expect(isSubstring("ab", "ab")).toBe(true);
  expect(isSubstring("abcdef", "cd")).toBe(true);
  expect(isSubstring("abcdef", "ab")).toBe(true);
  expect(isSubstring("abcdef", "ef")).toBe(true);
  expect(isSubstring("abcdef", "abd")).toBe(false);
  expect(isSubstring("abcdef", "cef")).toBe(false);
});
          </code></pre>
        </section>
        <section data-transition="fade-in fade-out">
          <pre class="javascript"><code data-trim data-noescape>
import { isSubstring } from "./isSubstring";
// isSubstring(text: string, word: string): boolean

test("should check if word is a substring of text", () => {
  expect(isSubstring("", "")).toBe(true);
  expect(isSubstring("ab", "ab")).toBe(true);
  expect(isSubstring("abcdef", "cd")).toBe(true);
  expect(isSubstring("abcdef", "ab")).toBe(true);
  expect(isSubstring("abcdef", "ef")).toBe(true);
});
          </code></pre>
        </section>
        <section data-transition="fade-in fade-out">
          <pre class="javascript"><code data-trim data-noescape>
import { isSubstring } from "./isSubstring";
// isSubstring(text: string, word: string): boolean

test("should check if word is a substring of text", () => {
  expect(isSubstring("" + "" + "", "")).toBe(true);
  expect(isSubstring("" + "ab" + "", "ab")).toBe(true);
  expect(isSubstring("ab" + "cd" + "ef", "cd")).toBe(true);
  expect(isSubstring("" + "ab" + "cdef", "ab")).toBe(true);
  expect(isSubstring("abcd" + "ef" + "", "ef")).toBe(true);
});
          </code></pre>
        </section>
        <section data-transition="fade-in fade-out">
          <pre class="javascript"><code data-trim data-noescape>
import { isSubstring } from "./isSubstring";
// isSubstring(text: string, word: string): boolean

test("should check if word is a substring of text", () => {
  expect(isSubstring(    "" + ""   + ""    , "")).toBe(true);
  expect(isSubstring(    "" + "ab" + ""    , "ab")).toBe(true);
  expect(isSubstring(  "ab" + "cd" + "ef"  , "cd")).toBe(true);
  expect(isSubstring(    "" + "ab" + "cdef", "ab")).toBe(true);
  expect(isSubstring("abcd" + "ef" + ""    , "ef")).toBe(true);
});
          </code></pre>
        </section>
        <section data-transition="fade-in fade-out">
          <pre class="javascript"><code data-trim data-noescape>
import { isSubstring } from "./isSubstring";
// isSubstring(text: string, word: string): boolean

test.each`
  a         | b       | c
  ${""}     | ${""}   | ${""}
  ${""}     | ${"ab"} | ${""}
  ${"ab"}   | ${"cd"} | ${"ef"}
  ${""}     | ${"ab"} | ${"cdef"}
  ${"abcd"} | ${"ef"} | ${""}
`("should check if word is a substring of text", ({a, b, c}) => {
  expect(isSubstring(a + b + c, b)).toBe(true);
});
          </code></pre>
        </section>
        <section>
          <p class="quote-right fragment">
            for all <em>a, b, c strings</em> <br /><em>b</em> is a substring of
            <em>a + b + c</em>
          </p>
          <div style="display: flex; flex-direction: row; justify-content: center;">
            <div style="padding: 24px;">
              <p style="font-size: 1.5em;">"<em>aze</em>"</p>
              <p style="font-size: 0.7em;">a</p>
            </div>
            <div style="padding: 24px;">
              <p style="font-size: 1.5em;">+</p>
              <p style="font-size: 0.7em;">&nbsp;</p>
            </div>
            <div style="padding: 24px;">
              <p style="font-size: 1.5em;">"<em>rt</em>"</p>
              <p style="font-size: 0.7em;">b</p>
            </div>
            <div style="padding: 24px;">
              <p style="font-size: 1.5em;">+</p>
              <p style="font-size: 0.7em;">&nbsp;</p>
            </div>
            <div style="padding: 24px;">
              <p style="font-size: 1.5em;">"<em>y</em>"</p>
              <p style="font-size: 0.7em;">c</p>
            </div>
          </div>
        </section>
        <section>
          <h2>Going randomâ€¦</h2>
          <h3 class="fragment">But reproducible way</h3>
          <h3 class="fragment">Not deterministic</h3>
          <!-- we want to cover new cases at each run -->
        </section>
        <section>
          <h2>Wait a minuteâ€¦ ðŸ˜“</h2>
          <h3 class="fragment">Random?</h3>
        </section>
        <section>
          <h2>What if the reported error is:</h2>
          <h3 class="fragment">
            "<em>.D0xjkFI{&lt;:nx#U3lI~</em>", "<em>j&gt;~&]&/'0Fw{?O</em>"
          </h3>
          <h3 class="fragment">[983 characters], [1302 characters]</h3>
        </section>
        <!--<section data-transition="slide-in fade-out">
          <img src="images/rec-1.png" />
        </section>
        <section data-transition="fade-in fade-out">
          <img src="images/rec-2.png" />
        </section>
        <section>
          <pre class="javascript"><code data-trim data-noescape>
          </code></pre>
        </section>-->
        <section>
          <!--
            Let's go back to race conditions
            Let's take the case of a simple autocomplete field like this one
            But fed from an API - like searches and suggestions in your favorite search engine (eg.: Google)
          -->
          <h2>ðŸ”™ Back to race conditions</h2>
          <h3 class="fragment custom-collapse">
            With a simple autocomplete field in React
          </h3>
        </section>
        <section>
          <!--
            Here is a footage of an autocomplete field
          -->
          <img src="./images/autocomplete-ok.gif" style="border: none; background: none; margin: 0px;" />
        </section>
        <section>
          <!--
            What can go wrong with it?
            Hmmmm... Actually many things
            Do you remember what can cause a race condition according to the definition from Wikipedia?
          -->
          <h3>What can go wrong with it?</h3>
        </section>
        <section>
          <!--
            Uncontrolled events!
            What can be the "uncontrolled events" in our case?
          -->
          <p class="quote">
            <span class="fragment highlight-transparent visible" data-fragment-index="1"
              >A race condition [â€¦] is the condition [â€¦] where the system's substantive behavior is dependent on the </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">sequence</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1"> or timing </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">of</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1"> other </span
            ><span class="fragment highlight-green visible" data-fragment-index="1">uncontrollable events</span
            ><span class="fragment highlight-transparent visible" data-fragment-index="1">.</span>
          </p>
          <p class="vsmallnote">
            Source:
            <a href="https://en.wikipedia.org/wiki/Race_condition" target="_blank"
              >https://en.wikipedia.org/wiki/Race_condition</a
            >
          </p>
        </section>
        <section>
          <!--
            - Interactions with the user:
              - More precisely for this case: user typings stuff in the field
            - Network delays:
              - Slow network
              - BUT also: some servers or requests might be slower than others
          -->
          <h3>
            Our
            <span style="color: rgb(17, 183, 33);">uncontrolled events</span>:
          </h3>
          <ul>
            <li class="fragment">Interactions with the user</li>
            <li class="fragment">Network delays</li>
          </ul>
        </section>
        <section>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 926 520">
            <g class="diag-white">
              <g transform="translate(10 436) rotate(0 453 0)">
                <path d="M1 -2 C152 -2, 754 -1, 905 -0 M1 2 C152 3, 752 1, 904 1" />
              </g>
              <g transform="translate(10 436) rotate(0 453 0)">
                <path d="M872 9 C881 11, 895 1, 901 2 M876 12 C885 7, 894 5, 902 1" />
              </g>
              <g transform="translate(10 436) rotate(0 453 0)">
                <path d="M872 -11 C880 -2, 895 -5, 901 2 M876 -7 C885 -5, 894 -0, 902 1" />
              </g>
            </g>
            <g class="diag-white" transform="translate(844 466) rotate(0 34 22)">
              <text x="0" y="32">Time</text>
            </g>
            <g class="diag-user fragment" data-fragment-index="1">
              <g transform="translate(60 265) rotate(0 0 80)">
                <path d="M-1 -1 C-0 25, -0 134, -0 162 M0 -0 C-0 26, 2 133, 1 160" />
              </g>
              <g transform="translate(60 265) rotate(0 0 80)">
                <path d="M-10 133 C-9 138, -1 147, -1 160 M-9 130 C-3 139, -1 147, -0 159" />
              </g>
              <g transform="translate(60 265) rotate(0 0 80)">
                <path d="M10 133 C6 138, 10 147, -1 160 M11 130 C10 138, 6 146, -0 159" />
              </g>
            </g>
            <g class="diag-user fragment" data-fragment-index="1" transform="translate(-118 217) rotate(270 150 22)">
              <text x="0" y="32">User looks for React</text>
            </g>
            <g class="diag-call fragment" data-fragment-index="2">
              <g transform="translate(83 426.148936170213) rotate(0 -1 -39)">
                <path d="M-1 -0 C-2 -13, -0 -62, -0 -74 M-2 -2 C-3 -15, 0 -64, 0 -77" />
              </g>
              <g transform="translate(83 426.148936170213) rotate(0 -1 -39)">
                <path d="M7 -50 C6 -60, 2 -70, 2 -80 M8 -50 C6 -56, 6 -60, 1 -76" />
              </g>
              <g transform="translate(83 426.148936170213) rotate(0 -1 -39)">
                <path d="M-12 -51 C-5 -61, -1 -70.551366474985, 2 -80 M-11 -51 C-8 -56, -3 -61, 1 -76" />
              </g>
            </g>
            <g class="diag-call fragment" data-fragment-index="2" transform="translate(-28 261) rotate(270 136.5 22)">
              <text x="0" y="32">API call for React</text>
            </g>
            <g class="diag-user fragment" data-fragment-index="3" transform="translate(141 232) rotate(270 140 22)">
              <text x="0" y="32">User looks for React-Europe</text>
            </g>
            <g class="diag-user fragment" data-fragment-index="3">
              <g transform="translate(311 264) rotate(0 -0 80)">
                <path d="M2 2 C2 30, -1 135, -1 162 M2 -2 C1 24, -2 135, -2 163" />
              </g>
              <g transform="translate(311 264) rotate(0 -0 80)">
                <path d="M-8 135 C-13 145, -8 151, -3 166 M-11 136 C-10 144, -8 151, -1 162" />
              </g>
              <g transform="translate(311 264) rotate(0 -0 80)">
                <path d="M11 135 C2 146, 2 152, -3 166 M9 136 C4 144, 2 151, -1 162" />
              </g>
            </g>
            <g class="diag-call fragment" data-fragment-index="4">
              <g transform="translate(331 425) rotate(0 -0 -36)">
                <path d="M0 1 C0 -10, 0 -62, 0 -75 M1 -4 C0 -17, -3 -61, -3 -72" />
              </g>
              <g transform="translate(331 425) rotate(0 -0 -36)">
                <path d="M10 -45 C5 -56, 3 -59, 0 -71 M9 -44 C5 -51, 3 -57, -4 -71" />
              </g>
              <g transform="translate(331 425) rotate(0 -0 -36)">
                <path d="M-10 -45 C-8 -55, -3 -59, 0 -71 M-10 -43 C-11 -51, -8 -57, -4 -71" />
              </g>
            </g>
            <g class="diag-call fragment" data-fragment-index="4" transform="translate(228 269) rotate(270 126 22)">
              <text x="0" y="32">API call for React-Europe</text>
            </g>
            <g class="diag-answer fragment" data-fragment-index="5">
              <g transform="translate(502 265) rotate(0 0 79)">
                <path d="M-0 0 C-1 27, -2 136, -2 163 M3 -4 C3 22, 3 135, 3 162" />
              </g>
              <g transform="translate(502 265) rotate(0 0 79)">
                <path d="M-6 131 C-4 146, -1 157, 5 165 M-6 133 C-3 141, -3 144, 1 160" />
              </g>
              <g transform="translate(502 265) rotate(0 0 79)">
                <path d="M14 132 C8 146, 4 157, 5 165 M14 133 C13 141, 8 144, 1 160" />
              </g>
            </g>
            <g class="diag-answer fragment" data-fragment-index="5" transform="translate(278 179) rotate(270 191 22)">
              <text x="0" y="32">Results for React-Europe</text>
            </g>
            <g class="diag-answer fragment" data-fragment-index="6">
              <g transform="translate(652 258) rotate(0 -1 83)">
                <path d="M0 2 C-0 29, -1 138, -2 165 M1 0 C0 27, -4 140, -4 167" />
              </g>
              <g transform="translate(652 258) rotate(0 -1 83)">
                <path d="M-11 137 C-7 148, -7 162, -2 168 M-15 138 C-12 147, -10 154, -6 166" />
              </g>
              <g transform="translate(652 258) rotate(0 -1 83)">
                <path d="M9 138 C4 149, -2 162, -2 168 M5 139 C1 148, -2 155, -6 166" />
              </g>
            </g>
            <g class="diag-answer fragment" data-fragment-index="6" transform="translate(439 186) rotate(270 181 22)">
              <text x="0" y="32">Results for React</text>
            </g>
          </svg>
        </section>
        <section>
          <!--
            And here is what you can get if you just delay a bit
            when the query resolves in the autocomplete above

            But how can we prevent from such issue?
            Let's build our own autocomplete and see we would usually test it
          -->
          <img src="./images/autocomplete-bug.gif" style="border: none; background: none; margin: 0px;" />
        </section>
        <section>
          <h2>Questions?</h2>
          <div style="margin-top: 48px;"></div>
          <div style="color: #cb3837; vertical-align: middle;">
            <img src="./images/npm.png" style="height: 32px; border: none; background: none; margin: 0px;" />
            fast-check
          </div>
          <div style="color: #ffffff; vertical-align: middle;">
            <img src="./images/github-white.png" style="height: 32px; border: none; background: none; margin: 0px;" />
            dubzzz
          </div>
          <div style="color: #1da1f2; vertical-align: middle;">
            <img src="./images/twitter.png" style="height: 32px; border: none; background: none; margin: 0px;" />
            ndubien
          </div>
          <div style="margin-top: 48px;"></div>
          <div>
            <img
              src="./images/fast-check-ui.png"
              style="border: none; background: none; margin: 0px; box-shadow: none;"
            />
          </div>
        </section>
      </div>
    </div>
    <div
      style="
        position: fixed;
        z-index: 9999;
        left: 1em;
        bottom: 1em;
        color: #ffffff;
        font-size: 1.5em;
        font-family: 'Source Sans Pro', Helvetica, sans-serif;
      "
    >
      <div style="color: #ffffff; vertical-align: middle;">
        <img src="./images/github-white.png" style="height: 16px; border: none; background: none; margin: 0px;" />
        dubzzz
      </div>
      <div style="color: #1da1f2; vertical-align: middle;">
        <img src="./images/twitter.png" style="height: 16px; border: none; background: none; margin: 0px;" />
        ndubien
      </div>
      <div style="color: #cb3837; vertical-align: middle;">
        <img src="./images/npm.png" style="width: 16px; border: none; background: none; margin: 0px;" />
        fast-check
      </div>
    </div>
    <script src="./static/head.min.js"></script>
    <script src="./static/reveal.min.js"></script>
    <script>
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Display a presentation progress bar
        progress: true,

        // Set default timing of 2 minutes per slide
        defaultTiming: 120,

        // Display the page number of the current slide
        slideNumber: false,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autolaying embedded media (video/audio/iframe)
        // - null: Media will only autoplay if data-autoplay is present
        // - true: All media will autoplay, regardless of individual setting
        // - false: No media will autoplay, regardless of individual setting
        autoPlayMedia: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: Reveal.navigateNext,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // Hides the address bar on mobile devices
        hideAddressBar: true,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Transition speed
        transitionSpeed: 'default', // default/fast/slow

        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Parallax background image
        parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

        // Parallax background size
        parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

        // Number of pixels to move the parallax background per slide
        // - Calculated automatically unless specified
        // - Set to 0 to disable movement along an axis
        parallaxBackgroundHorizontal: null,
        parallaxBackgroundVertical: null,

        // The display mode that will be used to show slides
        display: 'block',

        // Add timer coming from project: https://github.com/tkrkt/reveal.js-elapsed-time-bar
        allottedTime: 30 * 60 * 1000,
        keyboard: {
          82 /*r*/: () => {
            ElapsedTimeBar.reset();
          },
        },

        // Optional modules
        dependencies: [
          { src: './static/elapsed-time-bar.js' },
          {
            src: './static/classList.js',
            condition: function () {
              return !document.body.classList;
            },
          },
          {
            src: './static/marked.js',
            condition: function () {
              return !!document.querySelector('[data-markdown]');
            },
          },
          {
            src: './static/markdown.js',
            condition: function () {
              return !!document.querySelector('[data-markdown]');
            },
          },
          {
            src: './static/highlight.js',
            async: true,
            callback: function () {
              hljs.initHighlightingOnLoad();
            },
          },
          { src: './static/zoom.js', async: true },
        ],
      });
      // Taken from https://developer.mozilla.org/en-US/docs/Web/Events/wheel
      // creates a global "addWheelListener" method
      // example: addWheelListener( elem, function( e ) { console.log( e.deltaY ); e.preventDefault(); } );
      (function (window, document) {
        var prefix = '',
          _addEventListener,
          support;

        // detect event model
        if (window.addEventListener) {
          _addEventListener = 'addEventListener';
        } else {
          _addEventListener = 'attachEvent';
          prefix = 'on';
        }

        // detect available wheel event
        support =
          'onwheel' in document.createElement('div')
            ? 'wheel' // Modern browsers support "wheel"
            : document.onmousewheel !== undefined
            ? 'mousewheel' // Webkit and IE support at least "mousewheel"
            : 'DOMMouseScroll'; // let's assume that remaining browsers are older Firefox

        window.addWheelListener = function (elem, callback, useCapture) {
          _addWheelListener(elem, support, callback, useCapture);

          // handle MozMousePixelScroll in older Firefox
          if (support == 'DOMMouseScroll') {
            _addWheelListener(elem, 'MozMousePixelScroll', callback, useCapture);
          }
        };

        function _addWheelListener(elem, eventName, callback, useCapture) {
          elem[_addEventListener](
            prefix + eventName,
            support == 'wheel'
              ? callback
              : function (originalEvent) {
                  !originalEvent && (originalEvent = window.event);

                  // create a normalized event object
                  var event = {
                    // keep a ref to the original event object
                    originalEvent: originalEvent,
                    target: originalEvent.target || originalEvent.srcElement,
                    type: 'wheel',
                    deltaMode: originalEvent.type == 'MozMousePixelScroll' ? 0 : 1,
                    deltaX: 0,
                    deltaY: 0,
                    deltaZ: 0,
                    preventDefault: function () {
                      originalEvent.preventDefault
                        ? originalEvent.preventDefault()
                        : (originalEvent.returnValue = false);
                    },
                  };

                  // calculate deltaY (and deltaX) according to the event
                  if (support == 'mousewheel') {
                    event.deltaY = (-1 / 40) * originalEvent.wheelDelta;
                    // Webkit also support wheelDeltaX
                    originalEvent.wheelDeltaX && (event.deltaX = (-1 / 40) * originalEvent.wheelDeltaX);
                  } else {
                    event.deltaY = originalEvent.deltaY || originalEvent.detail;
                  }

                  // it's time to fire the callback
                  return callback(event);
                },
            useCapture || false
          );
        }
      })(window, document);

      window.addWheelListener(document, function (event) {
        console.log(JSON.stringify(event.deltaY));
        if (event.deltaY > 0) {
          document.dispatchEvent(
            new KeyboardEvent('keydown', {
              keyCode: 32,
              which: 32,
            })
          );
        } else if (event.deltaY < 0) {
          document.dispatchEvent(
            new KeyboardEvent('keydown', {
              keyCode: 33,
              which: 33,
            })
          );
        }
      });

      let laserEnabled = false;
      function laserPtr() {
        if (laserEnabled) return;
        laserEnabled = true;
        Reveal.removeEventListeners();
        window.addEventListener('keydown', (event) => {
          if (event.keyCode === 37 || event.keyCode === 38) Reveal.navigatePrev();
          if (event.keyCode === 39 || event.keyCode === 40) Reveal.navigateNext();
          if (event.keyCode === 82) ElapsedTimeBar.reset();
        });
      }
      let code = '';
      const laserCode = '!!!!!';
      window.addEventListener('keydown', (event) => {
        code += event.key;
        if (code.length > laserCode.length) code = code.substr(code.length - laserCode.length);
        if (code === laserCode) laserPtr();
      });
    </script>
  </body>
</html>
